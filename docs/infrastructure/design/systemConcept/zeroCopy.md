# 零拷贝

## dma  

direct memory access 直接内存访问
DMA 是一种硬件技术，它允许某些硬件子系统（如磁盘控制器、网卡、显卡）不经过 CPU 的干预，直接读写系统主内存 (RAM)。

## 传统非零拷贝常见

比如一个web服务器将文件通过网络发送给客户端

1. 应用程序调用read（）
2. cpu 将磁盘数据复制到内核缓冲区（页缓冲区）（通过dma 给dma发送指令）
3. cpu 将数据从内核缓冲区复制到用户缓冲区  第一次复制

1. 应用程序调用write（）
2. cpu将数据从用户缓冲区复制到套接字缓冲区 第二次复制
3. cpu将数据从套接字缓冲区复制到网卡（dma）

发生了俩次内核态和用户态之间的切换，以及俩次cpu参与的复制

## 零拷贝

内核直接将数据从页缓冲区复制到套接字缓冲区
